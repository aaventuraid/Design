"use strict";(()=>{var e={};e.id=113,e.ids=[113],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9802:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>w,patchFetch:()=>b,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>c});var r={};a.r(r),a.d(r,{POST:()=>h,runtime:()=>g});var i=a(9303),n=a(8716),o=a(3131);let s=require("sharp");var d=a.n(s);let p={gofood:{name:"GoFood",dimensions:{width:1080,height:1080,aspectRatio:"1:1"},quality:90,optimization:{brightness:1.08,saturation:1.15,sharpness:1.2,contrast:1.05},branding:{watermark:!1,brandColors:!0,logoOverlay:!1},fileSize:{max:2,unit:"MB"},description:"Optimized untuk GoFood - foto square berkualitas tinggi dengan warna cerah yang menggugah selera"},grabfood:{name:"GrabFood",dimensions:{width:1200,height:900,aspectRatio:"4:3"},quality:85,optimization:{brightness:1.06,saturation:1.12,sharpness:1.1,contrast:1.03},branding:{watermark:!1,brandColors:!0,logoOverlay:!1},fileSize:{max:1.5,unit:"MB"},description:"Optimized untuk GrabFood - format landscape dengan enhancement balanced"},shopeefood:{name:"ShopeeFood",dimensions:{width:800,height:800,aspectRatio:"1:1"},quality:88,optimization:{brightness:1.05,saturation:1.18,sharpness:1,contrast:1.02},branding:{watermark:!1,brandColors:!0,logoOverlay:!1},fileSize:{max:1,unit:"MB"},description:"Optimized untuk ShopeeFood - ukuran compact dengan saturasi tinggi"},instagram:{name:"Instagram",dimensions:{width:1080,height:1350,aspectRatio:"4:5"},quality:92,optimization:{brightness:1.1,saturation:1.25,sharpness:1.3,contrast:1.08},branding:{watermark:!0,brandColors:!0,logoOverlay:!0},fileSize:{max:3,unit:"MB"},description:"Optimized untuk Instagram - vertical format dengan branding Yuki Yaki Corner"},general:{name:"General",dimensions:{width:1024,height:1024,aspectRatio:"1:1"},quality:85,optimization:{brightness:1.05,saturation:1.12,sharpness:1,contrast:1},branding:{watermark:!1,brandColors:!1,logoOverlay:!1},fileSize:{max:2,unit:"MB"},description:"Preset umum dengan enhancement minimal"}};var u=a(3231);let g="nodejs";async function h(e){try{let t=await e.formData(),a=t.get("image"),r=Number(t.get("tolerance")??12),i=String(t.get("preset")??"general"),n="true"===String(t.get("branding")??"false");if(!a)return new Response("Image is required",{status:400});let o=p[i],s=await a.arrayBuffer(),g=d()(Buffer.from(s)).removeAlpha().toColorspace("rgb"),{data:h,info:l}=await g.raw().ensureAlpha().toBuffer({resolveWithObject:!0}),m={r:255,g:255,b:255},c=Math.max(0,Math.min(255,r));for(let e=0;e<h.length;e+=4){let t=h[e],a=h[e+1],r=h[e+2];Math.abs(t-m.r)<=c&&Math.abs(a-m.g)<=c&&Math.abs(r-m.b)<=c&&(h[e+3]=0)}let f=d()(h,{raw:{width:l.width,height:l.height,channels:4}}),w=o.optimization;f=f.modulate({brightness:w.brightness,saturation:w.saturation}).sharpen(w.sharpness),"general"!==i&&(f=f.resize(o.dimensions.width,o.dimensions.height,{fit:"cover",position:"center"})),n&&o.branding?.logoOverlay&&(f=f.composite([{input:Buffer.from(`
          <svg width="${o.dimensions.width}" height="${o.dimensions.height}">
            <rect x="0" y="0" width="${o.dimensions.width}" height="8" fill="${u.H.colors.primaryOrange}"/>
            <rect x="0" y="${o.dimensions.height-8}" width="${o.dimensions.width}" height="8" fill="${u.H.colors.primaryBlue}"/>
          </svg>
        `),top:0,left:0}]));let b=await f.png({compressionLevel:9,quality:o.quality}).toBuffer(),y=new Uint8Array(b),v=new Headers({"Content-Type":"image/png","X-Marketplace":i,"X-Dimensions":`${o.dimensions.width}x${o.dimensions.height}`,"X-Optimized-For":o.name});return new Response(y,{headers:v})}catch(e){return console.error("Processing error:",e),new Response(e?.message||"Processing error",{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/process/route",pathname:"/api/process",filename:"route",bundlePath:"app/api/process/route"},resolvedPagePath:"D:\\2AI\\app\\api\\process\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:f}=l,w="/api/process/route";function b(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:c})}},3231:(e,t,a)=>{a.d(t,{H:()=>r});let r={name:"Yuki Yaki Corner",colors:{primaryOrange:"#F28C28",primaryBlue:"#2B3A67",neutralDark:"#1E1E1E",neutralGray:"#4A4A4A",white:"#FFFFFF"},cta:{orderNow:"Pesan Sekarang"}}},9303:(e,t,a)=>{e.exports=a(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948],()=>a(9802));module.exports=r})();